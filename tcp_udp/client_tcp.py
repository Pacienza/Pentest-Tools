"""
Criação de um Cliente que vai se conectar em um servidor tcp usando a lib Socket,
essa lib conecta com a API de sockets do Sistema Operacional
"""

import socket

# Pra criar um Socket a gente precisa especificar o Tipo e a Familia
# SOCK_DGRAM -> Socket UDP
# SOCK_STREAM -> Socket TCP

# Cria um socket TCP. AF_INET indica que estamos usando IPv4 e SOCK_STREAM indica que é um socket TCP.
client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)


try:  # Bloco try pra conectar ao servidor e fazer upload/download

    # Conecta o URL/IP na porta indicada
    client.connect(
        ("google.com", 80)  # IP/URL e porta
    )

    # Envia uma requisição HTTP GET para o servidor. O b antes da string indica que a string é de bytes.
    client.send(b"GET / HTTP/1.1\r\nHost: www.google.com\r\n\r\n")

    # Recebe até 1024 bytes de dados da resposta do servidor e decodifica de bytes para string.
    pacotes_recebidos = client.recv(1024).decode()

    # print da resposta do server
    print(pacotes_recebidos)

# Printa qualquer erro que rolar durante a conexão
except Exception as error:
    print('Um erro ocorreu')
